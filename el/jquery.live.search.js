jQuery.fn.reverse=[].reverse;(function(a){a.liveSearch=function(m){var b=a.extend({},a.liveSearch.defaults,m);var i=this;var c;var e;function k(){if(b.remote){c=b.selectorContainer+" "+b.selectorElementsToSearch}else{c=b.selectorContainer+" "+b.selectorElementsToSearch}h();f();return i}var h=function(){a(b.selectorInputSearch).bind("keyup blur",function(){e=a(this).val();if(this.timer){clearTimeout(this.timer)}this.timer=setTimeout(function(){l()},b.typeDelay)})};var l=function(){if(e.length>=b.minCharacters){if(b.ajaxCallback){b.ajaxCallback.call(this)}else{j(e)}}else{if(e.length===0){if(b.ajaxCallback){b.ajaxCallback.call(this)}else{g()}}}};var f=function(){a(b.selectorInputSearch).keydown(function(n){if(n.keyCode===13){return false}})};var j=function(n){var o=new RegExp(n,"igm");if(b.selectorToHide&&b.selectorElementsToSearch!==b.selectorToHide){a(c).parents(b.selectorToHide).not(b.selectorFixed).hide();a(c).filter(function(){var q=a(this).html();return q.match(o)}).parents(b.selectorToHide).show();if(b.selectorHead){var p=true;a(b.selectorContainer).find(b.selectorHead+","+b.selectorToHide).reverse().each(function(){if(a(this).is(b.selectorToHide)){if(a(this).is(":visible")){p=false}}if(a(this).is(b.selectorHead)){if(p){a(this).hide()}else{a(this).show();p=true}}})}}else{a(c).not(b.selectorFixed).hide();a(c).filter(function(){var q=a(this).html();return q.match(o)}).show()}};var d=function(p){a(b.selectorContainer).find(b.selectorToHide).remove();var o=a(p).filter(b.selectorContainer).html();var n=a(b.selectorContainer);n.html(o);if(b.ajaxFilter){j(e)}};var g=function(){if(b.selectorToHide){a(b.selectorContainer).find(b.selectorToHide).show()}else{a(c).show()}if(b.selectorHead){a(b.selectorContainer).find(b.selectorHead).show()}};this.reFilter=function(){j(e)};this.ajaxDone=function(o,n){if(n===e){d(o,n)}};this.getInputSearchVal=function(){return e};return k()};a.liveSearch.defaults={attributeToSearch:"data-search",selectorContainer:"table",selectorElementsToSearch:"td",selectorInputSearch:"input#search_query",selectorHead:false,selectorToHide:false,minCharacters:3,typeDelay:500,ajaxFilter:true,ajaxCallback:false}})(jQuery);